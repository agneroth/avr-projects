gavrasm Gerd's AVR assembler version 5.1 (C)2021 by DG4FAC
----------------------------------------------------------

Path:        /home/anonimo/Desktop/sis_embarcados/avr-projects/basic_interupt/
Source file: basic_interupt.asm
Hex file:    basic_interupt.hex
Eeprom file: basic_interupt.eep
Compiled:    28.07.2022, 14:35:06
Pass:        2

     1: .MACRO CFG_STACK
     2: LDI R16,HIGH(RAMEND) // R16 = RAMEND_HIGH
     3: OUT SPH,R16 // SPH = R16
     4: LDI R16,LOW(RAMEND) // ...
     5: OUT SPL,R16
     6: .ENDMACRO
     7: 
     8: ; Configura porta 3 para leitura
     9: .MACRO CFG_PORT
    10: LDI R16,0x08
    11: OUT DDRD,R16
    12: .ENDMACRO
    13: 
    14: ; Configura porta 3 para external interrupt (qualquer sinal logico)
    15: .MACRO CFG_HANDLER
    16: LDI R16,(1<<ISC10)
    17: sts EICRA,R16
    18: LDI R17,(1<<INT1)
    19: out EIMSK,R17
    20: .ENDMACRO
    21: 
    22: ; Configura e liga a led
    23: .MACRO CFG_LED
    24: LDI R16,0x20
    25: OUT DDRB,R16
    26: LDI R18,0x20
    27: OUT PORTB,R18
    28: .ENDMACRO
    29: 
    30: 
    31: .MACRO HANDLER_MAIN
    32:  CPI R18,0x20
    33:  BREQ TURN_OFF ; ta ligado vai pra desligar
    34:  RJMP TURN_ON ; ta desligado vai pra ligar
    35: .ENDMACRO
    36: 
    37: 
    38: // diz o microcontrolador especifico p/ o compilador
    39: .device ATMega328p
    40: // inicio da memoria de código
    41: .org 0x0000
    42: // pula pro inicio do código
    43: 000000   C004  rjmp INIT
    44: .org 0x0004
    45: 000004   C011  rjmp HANDLER
    46: 
    47: 
    48: INIT:
    49: CFG_STACK
    49: 000005   E008  LDI R16,HIGH(RAMEND) // R16 = RAMEND_HIGH
    49: 000006   BF0E  OUT SPH,R16 // SPH = R16
    49: 000007   EF0F  LDI R16,LOW(RAMEND) // ...
    49: 000008   BF0D  OUT SPL,R16
    50: CFG_PORT
    50: 000009   E008  LDI R16,0x08
    50: 00000A   B90A  OUT DDRD,R16
    51: CFG_HANDLER
    51: 00000B   E004  LDI R16,(1<<ISC10)
    51: 00000C   9300  sts EICRA,R16
        00000D   0069
    51: 00000E   E012  LDI R17,(1<<INT1)
    51: 00000F   BB1D  out EIMSK,R17
    52: CFG_LED
    52: 000010   E200  LDI R16,0x20
    52: 000011   B904  OUT DDRB,R16
    52: 000012   E220  LDI R18,0x20
    52: 000013   B925  OUT PORTB,R18
    53: 000014   9478  SEI
    54: 
    55: 000015   CFFF  RJMP LOOP
    56: 
    57: HANDLER:
    58: 000016   C004  RJMP TURN_OFF
    59: 
    60: HANDLER_END:
    61: 000017   9518  RETI
    62: 
    63: TURN_ON:
    64: 000018   E220  LDI R18, 0x20 ; liga led
    65: 000019   B925  OUT PORTB,R18
    66: 00001A   CFFC  rjmp HANDLER_END
    67: 
    68: TURN_OFF: ; desliga led
    69: 00001B   E020  LDI R18, 0x00
    70: 00001C   B925  OUT PORTB,R18
    71: 00001D   CFF9  rjmp HANDLER_END

List of symbols:
Type nDef nUsed             Decimalval           Hexval Name
  T     1     1                    171               AB ATMEGA328P
  L     1     2                      5               05 INIT
  L     1     2                     21               15 LOOP
  L     1     2                     22               16 HANDLER
  L     1     4                     23               17 HANDLER_END
  L     1     0                     24               18 TURN_ON
  L     1     2                     27               1B TURN_OFF
  C     1     0                     22               16 NOW_Y
  C     1     0                      7               07 NOW_M
  C     1     0                     28               1C NOW_D
  C     1     0                  44770             AEE2 NOW_I

List of macros:
nLines nUsed nParams Name
     4     1       0 CFG_STACK
     2     1       0 CFG_PORT
     4     1       0 CFG_HANDLER
     4     1       0 CFG_LED
     3     0       0 HANDLER_MAIN

Program             :       27 words.
Constants           :        0 words.
Total program memory:       27 words.
Eeprom space        :        0 bytes.
Data segment        :        0 bytes.
Compilation completed, no errors.
Compilation ended 28.07.2022, 14:35:06
