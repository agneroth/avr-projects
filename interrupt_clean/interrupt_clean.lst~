gavrasm Gerd's AVR assembler version 5.1 (C)2021 by DG4FAC
----------------------------------------------------------

Path:        /home/anonimo/Desktop/sis_embarcados/avr-projects/interrupt_clean/
Source file: interrupt_clean.asm
Hex file:    interrupt_clean.hex
Eeprom file: interrupt_clean.eep
Compiled:    28.07.2022, 14:53:27
Pass:        2

     1: .MACRO CFG_STACK
     2:      LDI R16,HIGH(RAMEND) // R16 = RAMEND_HIGH
     3:      OUT SPH,R16 // SPH = R16
     4:      LDI R16,LOW(RAMEND) // ...
     5:      OUT SPL,R16
     6: .ENDMACRO
     7: 
     8: .MACRO CFG_PORT
     9:      LDI R16,(1<<PD2)
    10:      OUT DDRD,R16
    11: .ENDMACRO
    12: 
    13: .MACRO CFG_HANDLER
    14:      LDI R16,(1<<ISC01)
    15:      sts EICRA,R16
    16:      LDI R17,(1<<INT0)
    17:      out EIMSK,R17
    18: .ENDMACRO
    19: 
    20: .MACRO CFG_LED
    21:      LDI R16,
    22:      OUT DDRB,R16
    23:      LDI R18,0x20
    24:      OUT PORTB,R18
    25: .ENDMACRO
    26: 
    27: .MACRO HANDLER_MAIN
    28:       CPI R18,0x20
    29:       BREQ TURN_OFF   ; ta ligado vai pra desligar
    30:       RJMP TURN_ON    ; ta desligado vai pra ligar
    31: .ENDMACRO
    32: 
    33: // diz o microcontrolador especifico p/ o compilador
    34: .device ATMega328p
    35: // inicio da memoria de código
    36: .org 0x0000
    37: // pula pro inicio do código
    38: 000000   C002  rjmp   INIT
    39: .org 0x0002
    40: 000002   C00C  rjmp HANDLER
    41: 
    42: 
    43: INIT:
    44: 
    45:       CFG_STACK
    45: 000003   E008  LDI R16,HIGH(RAMEND) // R16 = RAMEND_HIGH
    45: 000004   BF0E  OUT SPH,R16 // SPH = R16
    45: 000005   EF0F  LDI R16,LOW(RAMEND) // ...
    45: 000006   BF0D  OUT SPL,R16
    46:       CFG_PORT
    46: 000007   E004  LDI R16,(1<<PD2)
    46: 000008   B90A  OUT DDRD,R16
    47:       CFG_LED
    47: 000009   E200  LDI R16,0x20
    47: 00000A   B904  OUT DDRB,R16
    47: 00000B   E220  LDI R18,0x20
    47: 00000C   B925  OUT PORTB,R18
    48:      ; CFG_HANDLER
    49: 00000D   9478  SEI
    50: 
    51: 00000E   CFFF  RJMP LOOP
    52: 
    53: HANDLER:
    54: 00000F   C004  RJMP TURN_OFF
    55: 
    56: 
    57: HANDLER_END:
    58: 000010   9518  RETI
    59: 
    60: TURN_ON:
    61: 000011   E220  LDI R18, 0x20        ; liga led
    62: 000012   B925  OUT PORTB,R18
    63: 000013   CFFC  rjmp HANDLER_END
    64: 
    65: 
    66: TURN_OFF:                  ; desliga led
    67: 000014   E020  LDI R18, 0x00
    68: 000015   B925  OUT PORTB,R18
    69: 000016   CFF9  rjmp HANDLER_END
    70: 
    71: 

List of symbols:
Type nDef nUsed             Decimalval           Hexval Name
  T     1     1                    171               AB ATMEGA328P
  L     1     2                      3               03 INIT
  L     1     2                     14               0E LOOP
  L     1     2                     15               0F HANDLER
  L     1     4                     16               10 HANDLER_END
  L     1     0                     17               11 TURN_ON
  L     1     2                     20               14 TURN_OFF
  C     1     0                     22               16 NOW_Y
  C     1     0                      7               07 NOW_M
  C     1     0                     28               1C NOW_D
  C     1     0                  44770             AEE2 NOW_I

List of macros:
nLines nUsed nParams Name
     4     1       0 CFG_STACK
     2     1       0 CFG_PORT
     4     0       0 CFG_HANDLER
     4     1       0 CFG_LED
     3     0       0 HANDLER_MAIN

Program             :       22 words.
Constants           :        0 words.
Total program memory:       22 words.
Eeprom space        :        0 bytes.
Data segment        :        0 bytes.
Compilation completed, no errors.
Compilation ended 28.07.2022, 14:53:27
